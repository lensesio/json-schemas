{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Kafka Connector Producer Overrides",
  "type": "object",
  "properties": {
    "producer.override.bootstrap.servers": {
      "type": "string",
      "description": "Kafka bootstrap servers for the connector's producer"
    },
    "producer.override.client.id": {
      "type": "string",
      "description": "An id string to pass to the server when making requests for tracking and logging purposes"
    },
    "producer.override.key.serializer": {
      "type": "string",
      "description": "Fully qualified class name for key serializer"
    },
    "producer.override.value.serializer": {
      "type": "string",
      "description": "Fully qualified class name for value serializer"
    },
    "producer.override.acks": {
      "type": "string",
      "enum": ["0", "1", "all"],
      "description": "The number of acknowledgments the producer requires from the broker. 0=fire-and-forget, 1=leader only, all=full ISR"
    },
    "producer.override.batch.size": {
      "type": "integer",
      "minimum": 0,
      "default": 16384,
      "description": "The producer will attempt to batch records together into fewer requests. This setting specifies the batch size in bytes. Default: 16384"
    },
    "producer.override.linger.ms": {
      "type": "integer",
      "minimum": 0,
      "default": 0,
      "description": "Time to wait before sending a batch to allow more records to accumulate. Default: 0 (send immediately)"
    },
    "producer.override.buffer.memory": {
      "type": "integer",
      "minimum": 0,
      "default": 33554432,
      "description": "Total bytes of memory the producer can use to buffer records waiting to be sent. Default: 33554432 (32MB)"
    },
    "producer.override.compression.type": {
      "type": "string",
      "enum": ["none", "gzip", "snappy", "lz4", "zstd"],
      "description": "Compression type for all data generated by the producer"
    },
    "producer.override.max.block.ms": {
      "type": "integer",
      "minimum": 0,
      "default": 60000,
      "description": "Max time to block when buffer is full or metadata unavailable. Default: 60000"
    },
    "producer.override.max.request.size": {
      "type": "integer",
      "minimum": 0,
      "default": 1048576,
      "description": "Maximum size of a request in bytes. Default: 1048576 (1MB)"
    },
    "producer.override.retries": {
      "type": "integer",
      "minimum": 0,
      "default": 2147483647,
      "description": "Number of retries for failed requests. Default: 2147483647"
    },
    "producer.override.retry.backoff.ms": {
      "type": "integer",
      "minimum": 0,
      "default": 100,
      "description": "Time to wait before retrying a failed request. Default: 100"
    },
    "producer.override.delivery.timeout.ms": {
      "type": "integer",
      "minimum": 0,
      "default": 120000,
      "description": "Upper bound on time to report success or failure after send(). Default: 120000"
    },
    "producer.override.request.timeout.ms": {
      "type": "integer",
      "minimum": 0,
      "default": 30000,
      "description": "Max time client waits for response of a request. Default: 30000"
    },
    "producer.override.enable.idempotence": {
      "type": "boolean",
      "default": true,
      "description": "When true, producer ensures exactly one copy of each message is written. Default: true"
    },
    "producer.override.max.in.flight.requests.per.connection": {
      "type": "integer",
      "minimum": 1,
      "default": 5,
      "description": "Maximum unacknowledged requests per connection before blocking. Default: 5"
    },
    "producer.override.metadata.max.age.ms": {
      "type": "integer",
      "minimum": 0,
      "default": 300000,
      "description": "Period after which metadata is force-refreshed. Default: 300000 (5 min)"
    },
    "producer.override.connections.max.idle.ms": {
      "type": "integer",
      "default": 540000,
      "description": "Close idle connections after this time. Default: 540000 (9 min)"
    },
    "producer.override.reconnect.backoff.ms": {
      "type": "integer",
      "minimum": 0,
      "default": 50,
      "description": "Base time to wait before reconnecting to a broker. Default: 50"
    },
    "producer.override.reconnect.backoff.max.ms": {
      "type": "integer",
      "minimum": 0,
      "default": 1000,
      "description": "Maximum time to wait when reconnecting to a broker. Default: 1000"
    },
    "producer.override.receive.buffer.bytes": {
      "type": "integer",
      "default": 32768,
      "description": "Size of TCP receive buffer (SO_RCVBUF). Use -1 for OS default. Default: 32768"
    },
    "producer.override.send.buffer.bytes": {
      "type": "integer",
      "default": 131072,
      "description": "Size of TCP send buffer (SO_SNDBUF). Use -1 for OS default. Default: 131072"
    },
    "producer.override.partitioner.class": {
      "type": "string",
      "description": "Fully qualified class name of the partitioner"
    },
    "producer.override.interceptor.classes": {
      "type": "string",
      "description": "Comma-separated list of producer interceptor classes"
    },
    "producer.override.transaction.timeout.ms": {
      "type": "integer",
      "minimum": 0,
      "default": 60000,
      "description": "Maximum time for a transaction before the coordinator proactively aborts it. Default: 60000"
    },
    "producer.override.transactional.id": {
      "type": "string",
      "description": "Transactional ID for exactly-once semantics across sessions"
    },
    "producer.override.security.protocol": {
      "type": "string",
      "enum": ["PLAINTEXT", "SSL", "SASL_PLAINTEXT", "SASL_SSL"],
      "description": "Kafka client security protocol"
    },
    "producer.override.sasl.mechanism": {
      "type": "string",
      "enum": ["PLAIN", "SCRAM-SHA-256", "SCRAM-SHA-512", "GSSAPI", "OAUTHBEARER", "AWS_MSK_IAM"],
      "description": "SASL authentication mechanism"
    },
    "producer.override.sasl.jaas.config": {
      "type": "string",
      "description": "JAAS configuration string for SASL authentication"
    },
    "producer.override.sasl.client.callback.handler.class": {
      "type": "string",
      "description": "Fully qualified class name of SASL client callback handler (required for AWS_MSK_IAM)"
    },
    "producer.override.ssl.truststore.location": {
      "type": "string",
      "description": "Path to the truststore file"
    },
    "producer.override.ssl.truststore.password": {
      "type": "string",
      "description": "Password for the truststore file"
    },
    "producer.override.ssl.truststore.type": {
      "type": "string",
      "enum": ["JKS", "PKCS12", "PEM"],
      "default": "JKS",
      "description": "Truststore file format. Default: JKS"
    },
    "producer.override.ssl.keystore.location": {
      "type": "string",
      "description": "Path to the keystore file"
    },
    "producer.override.ssl.keystore.password": {
      "type": "string",
      "description": "Password for the keystore"
    },
    "producer.override.ssl.keystore.type": {
      "type": "string",
      "enum": ["JKS", "PKCS12", "PEM"],
      "default": "JKS",
      "description": "Keystore file format. Default: JKS"
    },
    "producer.override.ssl.key.password": {
      "type": "string",
      "description": "Password for the private key in the keystore"
    },
    "producer.override.ssl.enabled.protocols": {
      "type": "string",
      "default": "TLSv1.2,TLSv1.3",
      "description": "Comma-separated list of enabled SSL protocols. Default: TLSv1.2,TLSv1.3"
    },
    "producer.override.ssl.protocol": {
      "type": "string",
      "enum": ["TLSv1.2", "TLSv1.3", "TLS"],
      "default": "TLSv1.3",
      "description": "SSL protocol used to generate SSLContext. Default: TLSv1.3"
    },
    "producer.override.ssl.cipher.suites": {
      "type": "string",
      "description": "Comma-separated list of cipher suites. Null uses default"
    },
    "producer.override.ssl.endpoint.identification.algorithm": {
      "type": "string",
      "enum": ["https", ""],
      "default": "https",
      "description": "Endpoint identification algorithm for hostname verification. Use 'https' or empty to disable. Default: https"
    }
  },
  "additionalProperties": true,

  "defaultSnippets": [
    {
      "label": "Producer Overrides: High Throughput",
      "description": "Optimized for high throughput with batching and compression",
      "body": {
        "producer.override.batch.size": 65536,
        "producer.override.linger.ms": 20,
        "producer.override.compression.type": "lz4",
        "producer.override.buffer.memory": 67108864,
        "producer.override.acks": "1"
      }
    },
    {
      "label": "Producer Overrides: Low Latency",
      "description": "Optimized for low latency with minimal batching",
      "body": {
        "producer.override.batch.size": 0,
        "producer.override.linger.ms": 0,
        "producer.override.acks": "1"
      }
    },
    {
      "label": "Producer Overrides: High Durability",
      "description": "Maximum durability with idempotence and full acknowledgments",
      "body": {
        "producer.override.acks": "all",
        "producer.override.enable.idempotence": true,
        "producer.override.max.in.flight.requests.per.connection": 5,
        "producer.override.retries": 2147483647,
        "producer.override.delivery.timeout.ms": 300000
      }
    },
    {
      "label": "Producer Overrides: SASL/PLAIN over SASL_SSL",
      "description": "SASL/PLAIN authentication using SASL_SSL protocol",
      "body": {
        "producer.override.security.protocol": "SASL_SSL",
        "producer.override.sasl.mechanism": "PLAIN",
        "producer.override.sasl.jaas.config": "org.apache.kafka.common.security.plain.PlainLoginModule required username=\"user\" password=\"pass\";"
      }
    },
    {
      "label": "Producer Overrides: SASL/SCRAM-SHA-512 over SASL_SSL",
      "description": "SCRAM-SHA-512 authentication using SASL_SSL protocol",
      "body": {
        "producer.override.security.protocol": "SASL_SSL",
        "producer.override.sasl.mechanism": "SCRAM-SHA-512",
        "producer.override.sasl.jaas.config": "org.apache.kafka.common.security.scram.ScramLoginModule required username=\"user\" password=\"pass\";"
      }
    },
    {
      "label": "Producer Overrides: AWS MSK IAM",
      "description": "AWS MSK IAM authentication",
      "body": {
        "producer.override.security.protocol": "SASL_SSL",
        "producer.override.sasl.mechanism": "AWS_MSK_IAM",
        "producer.override.sasl.jaas.config": "software.amazon.msk.auth.iam.IAMLoginModule required;",
        "producer.override.sasl.client.callback.handler.class": "software.amazon.msk.auth.iam.IAMClientCallbackHandler"
      }
    },
    {
      "label": "Producer Overrides: Kerberos (GSSAPI) with SASL_PLAINTEXT",
      "description": "GSSAPI/Kerberos authentication using SASL_PLAINTEXT",
      "body": {
        "producer.override.security.protocol": "SASL_PLAINTEXT",
        "producer.override.sasl.mechanism": "GSSAPI",
        "producer.override.sasl.jaas.config": "com.sun.security.auth.module.Krb5LoginModule required useKeyTab=true keyTab=\"/path/to/keytab\" principal=\"user@REALM.COM\";"
      }
    },
    {
      "label": "Producer Overrides: SSL Only (Mutual TLS)",
      "description": "SSL encryption with mutual TLS authentication",
      "body": {
        "producer.override.security.protocol": "SSL",
        "producer.override.ssl.truststore.location": "/etc/kafka/secrets/kafka.truststore.jks",
        "producer.override.ssl.truststore.password": "changeit",
        "producer.override.ssl.keystore.location": "/etc/kafka/secrets/kafka.keystore.jks",
        "producer.override.ssl.keystore.password": "changeit",
        "producer.override.ssl.key.password": "changeit",
        "producer.override.ssl.endpoint.identification.algorithm": "https"
      }
    }
  ]
}
