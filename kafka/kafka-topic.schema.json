{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Kafka Topic",
  "type": "object",
  "properties": {
    "name": {
      "type": "string",
      "description": "Topic name"
    },
    "partitions": {
      "type": "integer",
      "minimum": 1,
      "description": "Number of partitions"
    },
    "replicationFactor": {
      "type": "integer",
      "minimum": 1,
      "description": "Replication factor"
    },
    "configs": {
      "type": "object",
      "description": "Topic-level configuration overrides",
      "properties": {
        "cleanup.policy": {
          "type": "string",
          "enum": ["delete", "compact", "compact,delete", "delete,compact"],
          "description": "Cleanup policy"
        },
        "retention.ms": {
          "type": "integer",
          "description": "Retention time in milliseconds"
        },
        "retention.bytes": {
          "type": "integer",
          "description": "Retention size in bytes"
        },
        "segment.bytes": {
          "type": "integer",
          "description": "Segment file size in bytes"
        },
        "min.insync.replicas": {
          "type": "integer",
          "description": "Minimum in-sync replicas"
        },
        "max.message.bytes": {
          "type": "integer",
          "description": "Maximum message size in bytes"
        },
        "message.format.version": {
          "type": "string",
          "description": "Message format version"
        },
        "compression.type": {
          "type": "string",
          "enum": ["producer", "gzip", "snappy", "lz4", "zstd", "uncompressed"],
          "description": "Compression type"
        },
        "delete.retention.ms": {
          "type": "integer",
          "description": "Delete retention time in ms (for compacted topics)"
        },
        "file.delete.delay.ms": {
          "type": "integer",
          "description": "File delete delay in ms"
        },
        "flush.messages": {
          "type": "integer",
          "description": "Number of messages before flush"
        },
        "flush.ms": {
          "type": "integer",
          "description": "Time in ms before flush"
        },
        "index.interval.bytes": {
          "type": "integer",
          "description": "Index interval bytes"
        },
        "preallocate": {
          "type": "boolean",
          "description": "Preallocate log segments"
        },
        "unclean.leader.election.enable": {
          "type": "boolean",
          "description": "Allow unclean leader election"
        }
      },
      "additionalProperties": {
        "type": ["string", "integer", "boolean"]
      }
    }
  },
  "required": ["name", "partitions", "replicationFactor"]
}